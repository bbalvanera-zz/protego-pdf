.card.fixed-height
  h6.card-header.bg-primary.text-light.pl-2
    a.text-light.mr-3(routerLink="/")
      i.fas.fa-arrow-left
    | Password manager
  .card-body.border.border-top-0.border-right-0.border-left-0
    form.form-row([formGroup]="form")
      .col-4
        input.form-control.form-control-sm(
          type="text",
          placeholder="Password name",
          formControlName="name",
          [ngClass]="{'is-invalid': form.name.invalid && form.name.dirty}"
        )
        .invalid-feedback.pl-2.mb-2(*ngIf="form.name.errors?.required && form.name.dirty") Please specify a name or description
        .invalid-feedback.pl-2.mb-2(*ngIf="form.name.errors?.maxlength && form.name.dirty") Please specify a name of no more than 50 chars.
        .invalid-feedback.pl-2.mb-2(*ngIf="form.name.errors?.duplicated && form.name.dirty") Please type another name. This one already exists
      .col-5
        input.form-control.form-control-sm.password-input(
          type="text",
          placeholder="Password",
          formControlName="password",
          [ngClass]="{'is-invalid': form.password.invalid && form.password.dirty}"
        )
        .invalid-feedback.pl-2.mb-2(*ngIf="form.password.errors?.required && form.password.dirty") Please specify a password
        .invalid-feedback.pl-2.mb-2(*ngIf="form.password.errors?.maxlength && form.password.dirty") Please specify a password of no more than 32 chars.
      .col-1
        .btn-group-toggle
          label.btn.btn-sm.favorite(title="Mark as favorite")
            input(
              type="checkbox",
              formControlName="favorite",
              #favoriteChk)
            div(*ngIf="favoriteChk.checked")
              i.fas.fa-star(alt="Mark as favorite", aria-hidden="true")
            div(*ngIf="!favoriteChk.checked")
              i.far.fa-star(alt="Mark as favorite", aria-hidden="true")
      .col-2
        button.btn.btn-sm.btn-block.btn-primary(type="submit", (click)="save()") Save
  .card-body.fixed-height.favorites-table-body
    table.table.table-sm.table-hover
      thead
        tr
          th(scope="col") Name
          th(scope="col") Password
          th.text-center(scope="col") Favorite
          th(scope="col")
      tbody
        tr(*ngFor="let pwd of savedPasswords | async; trackBy: getItemId")
          td.name-column
            a.text-primary(routerLink="/", [queryParams]="{ pwd: pwd.password }") {{pwd.name}}
          td {{pwd.password}}
          td.favorite-column
            div((click)="updateFavorite(pwd.name)")
              i.fa-star(
                alt="Mark as favorite",
                aria-hidden="true",
                [ngClass]="{'far': !pwd.favorite, 'fas': pwd.favorite}"
              )
          td.delete-column
            i.far.fa-trash-alt.text-danger(
              alt="Delete password",
              (click)="deletePassword(pwd.name)"
            )
  .card-footer
    button.btn.btn-sm.btn-outline-secondary(type="button")
      i.fas.fa-cog(aria-hidden="true")
    button.btn.btn-sm.btn-outline-secondary(type="button")
      i.fas.fa-question-circle(aria-hidden="true")
app-ui-messages
  app-ui-message(id="Success_Message", title="Your password has been saved")
